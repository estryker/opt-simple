<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>RDoc Documentation</title>

<link href="./fonts.css" rel="stylesheet">
<link href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/navigation.js"></script>
<script src="./js/search_index.js"></script>
<script src="./js/search.js"></script>
<script src="./js/searcher.js"></script>
<script src="./js/darkfish.js"></script>


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>


    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="./README.html">README</a>
  
  </ul>
</div>

    <div id="classindex-section" class="nav-section">
  <h3>Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./Object.html">Object</a>
  
    <li><a href="./OptSimple.html">OptSimple</a>
  
    <li><a href="./OptSimple/Argument.html">OptSimple::Argument</a>
  
    <li><a href="./OptSimple/Error.html">OptSimple::Error</a>
  
    <li><a href="./OptSimple/Flag.html">OptSimple::Flag</a>
  
    <li><a href="./OptSimple/InvalidOption.html">OptSimple::InvalidOption</a>
  
    <li><a href="./OptSimple/MissingArgument.html">OptSimple::MissingArgument</a>
  
    <li><a href="./OptSimple/Option.html">OptSimple::Option</a>
  
    <li><a href="./OptSimple/Parameter.html">OptSimple::Parameter</a>
  
    <li><a href="./OptSimple/ParameterUsageError.html">OptSimple::ParameterUsageError</a>
  
    <li><a href="./OptSimple/Result.html">OptSimple::Result</a>
  
    <li><a href="./Option.html">Option</a>
  
    <li><a href="./Test.html">Test</a>
  
    <li><a href="./Test/Unit.html">Test::Unit</a>
  
    <li><a href="./Test/Unit/TestCase.html">Test::Unit::TestCase</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main">


<h2 id="label-OptSimple+provides+a+very+simple+interface+to+command+line+parsing.+"><a href="OptSimple.html">OptSimple</a> provides a very simple interface to command line parsing. <span><a href="#label-OptSimple+provides+a+very+simple+interface+to+command+line+parsing.+">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<h2 id="label-Description">Description<span><a href="#label-Description">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Parameter specification, validity checking and argument transformations can
be put in one place, default parameters are easily set, and an automatic
usage statement is constructed.</p>

<p>There are three methods to define command line parameters:</p>

<pre>flag - a command line switch with no arguments following 

option - an optional command line parameter with one or more arguments

argument - a mandatory command line parameter with one or more arguments</pre>

<p>Inside the blocks in flag, option, and argument a shortcut function called
&#39;set_opt&#39; can be used to set an option that will be returned in the
Result. The &#39;accumulate_opt&#39; method can be used in the option and
argument blocks to create a list of values, and in  the flag block to
increment a counter (with verbosity being the classic example).</p>

<p>The number of arguments are determined by the &#39;arity&#39; of the block,
or a variable number if the splat operator is used.</p>

<p>The order in which the parameters are defined dictate their order on the
command line.</p>

<p>User defined help banners, summaries or the whole usage statement can be
defined.</p>

<h2 id="label-Documentation">Documentation<span><a href="#label-Documentation">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>See <a href="OptSimple.html">OptSimple</a> for the API specification</p>

<h2 id="label-Installation">Installation<span><a href="#label-Installation">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>It is recommended to install <a href="OptSimple.html">OptSimple</a> using
RubyGems:</p>

<pre>$ sudo gem install opt-simple</pre>

<h2 id="label-Examples">Examples<span><a href="#label-Examples">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<h3 id="label-One+example+that+shows+most+of+the+behavior+you+might+use">One example that shows most of the behavior you might use<span><a href="#label-One+example+that+shows+most+of+the+behavior+you+might+use">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;opt_simple&#39;</span>

<span class="ruby-identifier">defaults</span> = {  
  :<span class="ruby-identifier">glob_pattern</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;*&#39;</span>,
  :<span class="ruby-identifier">num_results</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">42</span>,
  :<span class="ruby-identifier">range</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value">5</span>,<span class="ruby-value">10</span>]
}

<span class="ruby-identifier">opts</span> = <span class="ruby-constant">OptSimple</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">defaults</span>).<span class="ruby-identifier">parse_opts!</span> <span class="ruby-keyword">do</span> 
  <span class="ruby-identifier">argument</span> <span class="ruby-node">%w[-i --infile]</span>, <span class="ruby-string">&quot;Infile, multiple allowed&quot;</span>, <span class="ruby-string">&quot;FILE&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">|</span>
    <span class="ruby-identifier">accumulate_opt</span> <span class="ruby-identifier">arg</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">flag</span> <span class="ruby-node">%w[-d --debug]</span>,<span class="ruby-string">&quot;debug mode&quot;</span>

  <span class="ruby-identifier">flag</span> <span class="ruby-node">%w[-m --cowbell --morecowbell]</span>,<span class="ruby-string">&quot;I&#39;ve got a fever, and this is the only prescription.&quot;</span> <span class="ruby-keyword">do</span> 
    <span class="ruby-identifier">accumulate_opt</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">option</span> <span class="ruby-node">%w[-n -num --num-values]</span>,<span class="ruby-string">&quot;The answer to everything&quot;</span>,<span class="ruby-string">&quot;VAL&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">set_opt</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">to_i</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">option</span> <span class="ruby-node">%w[-p --pattern --glob-pattern]</span>, <span class="ruby-string">&quot;glob pattern&quot;</span>,<span class="ruby-string">&quot;PATTERN&quot;</span>

  <span class="ruby-comment"># this block has arity 2, so it expects two args to follow</span>
  <span class="ruby-identifier">option</span> <span class="ruby-string">&quot;--range&quot;</span>, <span class="ruby-string">&quot;range: min,max (both &gt;0)&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">arg1</span>,<span class="ruby-identifier">arg2</span> <span class="ruby-operator">|</span>
    <span class="ruby-identifier">min</span>,<span class="ruby-identifier">max</span> = [<span class="ruby-identifier">arg1</span>.<span class="ruby-identifier">to_i</span>,<span class="ruby-identifier">arg2</span>.<span class="ruby-identifier">to_i</span>]
    <span class="ruby-identifier">set_opt</span> [<span class="ruby-identifier">min</span>,<span class="ruby-identifier">max</span>]

    <span class="ruby-identifier">error</span> <span class="ruby-string">&quot;max must be greater than min&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">max</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">min</span>
    <span class="ruby-identifier">error</span> <span class="ruby-string">&quot;both must be &gt;=0&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">min</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>  

  <span class="ruby-comment"># this block says that there are a variable number of arguments allowed</span>
  <span class="ruby-identifier">option</span> <span class="ruby-node">%w[-t --things]</span>,<span class="ruby-string">&quot;Some things - variable number allowed&quot;</span>,<span class="ruby-string">&quot;THINGS&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-operator">*</span><span class="ruby-identifier">args</span> <span class="ruby-operator">|</span>
    <span class="ruby-identifier">args</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span> <span class="ruby-identifier">accumulate_opt</span> <span class="ruby-identifier">a</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Options&quot;</span>
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">opts</span>

<span class="ruby-comment"># you can use method syntax to access the options</span>
<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Infile list: #{opts.infile}&quot;</span>

<span class="ruby-comment"># Flags are set to false by default</span>
<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Debug&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">debug</span>

<span class="ruby-comment"># If accumulate_opt is used, flags still default to false, but</span>
<span class="ruby-comment"># will be integers if set on the CL</span>
<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Cowbell: #{opts[&#39;cowbell&#39;]}&quot;</span>

<span class="ruby-comment"># Dashes will be replaced by underscores so that method syntax works nicely </span>
<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;N: #{opts.num_values}&quot;</span>
<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;N: #{opts[&#39;num-values&#39;]}&quot;</span>

<span class="ruby-comment"># You can check to see if Options were set</span>
<span class="ruby-comment"># and you can use hash syntax to access the options as strings or symbols</span>
<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Pattern: #{opts[:p]}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">include?</span>(:<span class="ruby-identifier">p</span>)

<span class="ruby-comment"># Here, range was set to an Array. </span>
<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Range: #{opts.range.first} #{opts.range.last}&quot;</span>

<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Things: #{opts.things.inspect}&quot;</span>
</pre>

<p>Which prints out an automatic usage statement:</p>

<pre>Usage: opt_ex.rb [options]

  MANDATORY ARGS:
    -i, --infile FILE                           Infile, multiple allowed

  OPTIONS:
    -d, --debug                                 debug mode

    -m, --cowbell, --morecowbell                I&#39;ve got a fever, and this is the only prescription.

    -n, -num, --num-values VAL                  The answer to everything

    -p, --pattern, --glob-pattern PATTERN       glob pattern (default is &#39;*&#39;)

        --range ARG                             range: min,max (both &gt;0) (default is &#39;[5, 10]&#39;)

        -t, --things THINGS                         Some things - variable number allowed 

    -h, --help                                  (for this help message)</pre>

<h3 id="label-A+very+simple+example+with+no+error+checking.+Use+at+your+own+risk%21">A very simple example with no error checking. Use at your own risk!<span><a href="#label-A+very+simple+example+with+no+error+checking.+Use+at+your+own+risk%21">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;opt_simple&#39;</span>

<span class="ruby-identifier">defaults</span> = {
<span class="ruby-string">&#39;max&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">40</span>
} 

<span class="ruby-identifier">options</span> = <span class="ruby-constant">OptSimple</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">defaults</span>).<span class="ruby-identifier">parse_opts!</span> 

<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Options&quot;</span>
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">options</span>
</pre>

<h3 id="label-An+example+using+all+default+behavior+">An example using all default behavior <span><a href="#label-An+example+using+all+default+behavior+">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;opt_simple&#39;</span>

<span class="ruby-identifier">options</span> = <span class="ruby-constant">OptSimple</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">parse_opts!</span> <span class="ruby-keyword">do</span> 
  <span class="ruby-identifier">argument</span> <span class="ruby-string">&quot;-i&quot;</span>,<span class="ruby-string">&quot;inFile&quot;</span>,<span class="ruby-string">&quot;FILE&quot;</span>
  <span class="ruby-identifier">option</span> <span class="ruby-node">%w[-p --pattern --glob-pattern]</span>, <span class="ruby-string">&quot;glob pattern&quot;</span>,<span class="ruby-string">&quot;PATTERN&quot;</span>
  <span class="ruby-identifier">flag</span> <span class="ruby-string">&quot;-v&quot;</span>,<span class="ruby-string">&quot;Verbose&quot;</span>
  <span class="ruby-identifier">flag</span> <span class="ruby-string">&quot;-whatever&quot;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Options&quot;</span>
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">options</span>
</pre>

<h3 id="label-An+example+that+shows+how+to+set+the+banner+string%2C+and+add+a+summary.">An example that shows how to set the banner string, and add a summary.<span><a href="#label-An+example+that+shows+how+to+set+the+banner+string%2C+and+add+a+summary.">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;opt_simple&#39;</span>

<span class="ruby-identifier">defaults</span> = {
  <span class="ruby-string">&quot;max&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>
}

<span class="ruby-identifier">options</span> = <span class="ruby-constant">OptSimple</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">defaults</span>).<span class="ruby-identifier">parse_opts!</span> <span class="ruby-keyword">do</span> 
  <span class="ruby-identifier">banner</span> <span class="ruby-node">&quot;USAGE: #{$0}&quot;</span>
  <span class="ruby-identifier">summary</span> <span class="ruby-string">&quot;Show how to set a banner and summary.&quot;</span>

  <span class="ruby-identifier">argument</span> <span class="ruby-string">&quot;-i&quot;</span>,<span class="ruby-string">&quot;inFile&quot;</span> 
  <span class="ruby-identifier">option</span> <span class="ruby-node">%w[-m -max --maximum-value]</span>,<span class="ruby-string">&quot;Maximum val&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">set_opt</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">to_i</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Options&quot;</span>
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">options</span>
</pre>

<h3 id="label-An+example+that+shows+that+you+can+easily+set+your+defaults+in+normal+Ruby+variables+and+provide+your+own+help.">An example that shows that you can easily set your defaults in normal Ruby variables and provide your own help.<span><a href="#label-An+example+that+shows+that+you+can+easily+set+your+defaults+in+normal+Ruby+variables+and+provide+your+own+help.">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;opt_simple&#39;</span>

<span class="ruby-identifier">in_file</span> = <span class="ruby-keyword">nil</span>
<span class="ruby-identifier">min</span> = <span class="ruby-value">0</span>
<span class="ruby-identifier">max</span> = <span class="ruby-value">10</span>
<span class="ruby-identifier">pattern</span> = <span class="ruby-string">&quot;*&quot;</span>

<span class="ruby-identifier">usage_string</span> = <span class="ruby-value">&lt;&lt;-UL
Usage: $0 [options]

  -i, --infile FILE
 [--range (min - default #{min}, max - default #{max})]
 [-p, --pattern, --glob-pattern (default #{pattern})]
 [-v (verbose)]
 [-h, --help (help)]

UL</span>

<span class="ruby-constant">OptSimple</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">parse_opts!</span> <span class="ruby-keyword">do</span> 
  <span class="ruby-identifier">help</span> <span class="ruby-identifier">usage_string</span>

  <span class="ruby-identifier">argument</span> <span class="ruby-node">%w[-i --infile]</span>,<span class="ruby-string">&quot;inFile&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">in_file</span> = <span class="ruby-identifier">arg</span>
    <span class="ruby-identifier">error</span> <span class="ruby-string">&quot;inFile must exist and be readable&quot;</span> <span class="ruby-keyword">unless</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">readable?</span>(<span class="ruby-identifier">in_file</span>))
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">option</span> [<span class="ruby-string">&quot;--range&quot;</span>], <span class="ruby-node">&quot;range: min,max (both &gt;0) default is #{min},#{max}&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">arg1</span>,<span class="ruby-identifier">arg2</span> <span class="ruby-operator">|</span>
    <span class="ruby-identifier">min</span> = <span class="ruby-identifier">arg1</span>.<span class="ruby-identifier">to_i</span>
    <span class="ruby-identifier">max</span> = <span class="ruby-identifier">arg2</span>.<span class="ruby-identifier">to_i</span>    

    <span class="ruby-identifier">error</span> <span class="ruby-string">&quot;max must be greater than min&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">max</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">min</span>
    <span class="ruby-identifier">error</span> <span class="ruby-string">&quot;both must be &gt;=0&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">min</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>  

  <span class="ruby-identifier">option</span> <span class="ruby-node">%w[-p --pattern --glob-pattern]</span>, <span class="ruby-node">&quot;glob pattern, default is #{pattern}&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">pattern</span> = <span class="ruby-identifier">arg</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">flag</span> <span class="ruby-string">&quot;-v&quot;</span>,<span class="ruby-string">&quot;Verbose&quot;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;in_file #{in_file}&quot;</span>
<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;min #{min}&quot;</span>
<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;max #{max}&quot;</span>
<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;pattern #{pattern}&quot;</span>

<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;ARGV&quot;</span>
<span class="ruby-identifier">puts</span> <span class="ruby-constant">ARGV</span>
</pre>

<h3 id="label-An+example+showing+how+to+register+parms+in+multiple+places+before+parsing+the+command+line">An example showing how to register parms in multiple places before parsing the command line<span><a href="#label-An+example+showing+how+to+register+parms+in+multiple+places+before+parsing+the+command+line">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;opt_simple&#39;</span>

<span class="ruby-identifier">min</span> = <span class="ruby-value">5</span>
<span class="ruby-identifier">max</span> = <span class="ruby-value">15</span>

<span class="ruby-identifier">os</span> = <span class="ruby-constant">OptSimple</span>.<span class="ruby-identifier">new</span>

<span class="ruby-identifier">os</span>.<span class="ruby-identifier">register_opts</span> <span class="ruby-keyword">do</span> 
  <span class="ruby-identifier">argument</span> <span class="ruby-node">%w[-i --infile]</span>, <span class="ruby-string">&quot;Infile, multiple allowed&quot;</span>, <span class="ruby-string">&quot;FILE&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">|</span>
    <span class="ruby-identifier">accumulate_opt</span> <span class="ruby-identifier">arg</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">option</span> <span class="ruby-node">%w[-p --pattern --glob-pattern]</span>, <span class="ruby-string">&quot;glob pattern&quot;</span>,<span class="ruby-string">&quot;PATTERN&quot;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">os</span>.<span class="ruby-identifier">register_opts</span> <span class="ruby-keyword">do</span> 
  <span class="ruby-identifier">option</span> <span class="ruby-node">%w[-n -num --num-values]</span>,<span class="ruby-string">&quot;Number of val&quot;</span>,<span class="ruby-string">&quot;VAL&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">set_opt</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">to_i</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">option</span> <span class="ruby-string">&quot;--range&quot;</span>, <span class="ruby-node">&quot;range: min,max (both &gt;0) default is #{min},#{max}&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">arg1</span>,<span class="ruby-identifier">arg2</span> <span class="ruby-operator">|</span>
    <span class="ruby-identifier">min</span> = <span class="ruby-identifier">arg1</span>.<span class="ruby-identifier">to_i</span>
    <span class="ruby-identifier">max</span> = <span class="ruby-identifier">arg2</span>.<span class="ruby-identifier">to_i</span>    

    <span class="ruby-identifier">error</span> <span class="ruby-string">&quot;max must be greater than min&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">max</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">min</span>
    <span class="ruby-identifier">error</span> <span class="ruby-string">&quot;both must be &gt;=0&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">min</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">flag</span> <span class="ruby-node">%w[-v  --verbose]</span>,<span class="ruby-string">&quot;Verbosity. the more you set, the more we give&quot;</span> <span class="ruby-keyword">do</span> 
    <span class="ruby-identifier">accumulate_opt</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">options</span> = <span class="ruby-identifier">os</span>.<span class="ruby-identifier">parse_opts!</span>

<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Options&quot;</span>
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">options</span>
</pre>

<h3 id="label-A+totally+contrived+example+showing+how+to+change+multiple+options+within+an+option+specification+block">A totally contrived example showing how to change multiple options within an option specification block<span><a href="#label-A+totally+contrived+example+showing+how+to+change+multiple+options+within+an+option+specification+block">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;opt_simple&#39;</span>

<span class="ruby-identifier">allowed_odds</span> = [<span class="ruby-value">1</span>,<span class="ruby-value">3</span>,<span class="ruby-value">5</span>,<span class="ruby-value">7</span>]
<span class="ruby-identifier">allowed_evens</span> = [<span class="ruby-value">2</span>,<span class="ruby-value">4</span>,<span class="ruby-value">6</span>]
<span class="ruby-identifier">defaults</span> = {
  :<span class="ruby-identifier">even_val</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">allowed_evens</span>.<span class="ruby-identifier">first</span>,
  :<span class="ruby-identifier">odd_val</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">allowed_odds</span>.<span class="ruby-identifier">first</span>
}

<span class="ruby-comment"># Note that b/c we define option [--odd] and [--evens] _after_ the max-out flag, </span>
<span class="ruby-comment"># they will override the max-out setting. </span>
<span class="ruby-identifier">opts</span> = <span class="ruby-constant">OptSimple</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">defaults</span>).<span class="ruby-identifier">parse_opts!</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">opt_obj</span> <span class="ruby-operator">|</span>
  <span class="ruby-identifier">flag</span> <span class="ruby-node">%w[-m --max-out]</span>, <span class="ruby-string">&quot;Maximize evens and odds.&quot;</span> <span class="ruby-keyword">do</span> 
    <span class="ruby-identifier">opt_obj</span>.<span class="ruby-identifier">odd_val</span> = <span class="ruby-identifier">allowed_odds</span>.<span class="ruby-identifier">last</span>
    <span class="ruby-identifier">opt_obj</span>.<span class="ruby-identifier">even_val</span> = <span class="ruby-identifier">allowed_evens</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">option</span> <span class="ruby-string">&quot;--odd-val&quot;</span>,<span class="ruby-node">&quot;Odd val in #{allowed_odds.inspect}&quot;</span>,<span class="ruby-string">&quot;VAL&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">|</span>
    <span class="ruby-identifier">val</span> = <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">to_i</span>
    <span class="ruby-identifier">error</span> <span class="ruby-node">&quot;Odd val must be in #{allowed_odds.inspect}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">allowed_odds</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">val</span>
    <span class="ruby-identifier">set_opt</span> <span class="ruby-identifier">val</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">option</span> <span class="ruby-string">&quot;--even-val&quot;</span>,<span class="ruby-node">&quot;Even val #{allowed_evens.inspect}&quot;</span>,<span class="ruby-string">&quot;VAL&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">|</span>
    <span class="ruby-identifier">val</span> = <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">to_i</span>
    <span class="ruby-identifier">error</span> <span class="ruby-node">&quot;Even val must be in #{allowed_evens.inspect}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">allowed_evens</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">val</span>
    <span class="ruby-identifier">set_opt</span> <span class="ruby-identifier">val</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Options&quot;</span>
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">opts</span>
</pre>

<h2 id="label-Questions+and%2For+Comments">Questions and/or Comments<span><a href="#label-Questions+and%2For+Comments">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>email <a href="mailto:e.stryker@gmail.com">Ethan Stryker</a></p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

