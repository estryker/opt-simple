require 'opt_simple'
require 'test/unit' 
require 'test_unit_extensions'

class TestHelpStatement < Test::Unit::TestCase

  must "disallow name collisions in argument spec" do
    assert_raise(OptSimple::Error) { OptSimple.new.parse_opts! {option %w[-a --awesome]; flag '-awesome' } }
  end

  must "raise error when unknown option is given" do 
    os = OptSimple.new({},nil,['-not-specified'])
    assert_raise(OptSimple::InvalidOption) { os.parse_opts! { option %w[-a --awesome]  }  }
  end

  must "raise error when not enough arguments are given" do
    os = OptSimple.new({},nil,['-a'])
    assert_raise(OptSimple::MissingArgument) { os.parse_opts! { option '-a' {|arg| nil}  }  }
  end
  
  must "raise error when too many arguments are given" do
    os = OptSimple.new({},nil,['-a file1'])
    assert_raise(OptSimple::Error) { os.parse_opts! { option '-a' {|arg| nil}  }  }
  end
end

